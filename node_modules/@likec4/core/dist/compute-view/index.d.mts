import { A as Any, t as toComputed, d as AnyParsed, m as _stage } from '../shared/core.D00YbOhQ.mjs';
import { f as LikeC4Model } from '../shared/core.BfCKSW-g.mjs';
import { P as ParsedLikeC4ModelData, C as ComputedLikeC4ModelData, p as ParsedView, r as ComputedView, J as DiagramNode, K as DiagramEdge } from '../shared/core.osFs8tU7.mjs';
import { H as BaseViewProperties, O as ComputedNode, P as ComputedEdge, B as ViewAutoLayout } from '../shared/core.Dojz4bvg.mjs';
import { P as ProjectId } from '../shared/core.C_3y3eqV.mjs';
import { B as BBox } from '../shared/core.BPGOjone.mjs';
import { N as NonEmptyArray } from '../shared/core.DB0Ue5Wx.mjs';
import 'type-fest';
import '../shared/core.CAgYpDtM.mjs';
import '../shared/core.DC5IAaDT.mjs';
import '../types/fqnRef.mjs';
import '../shared/core.CywrQs86.mjs';
import '../types/expression-model.mjs';

type ComputeViewResult<V> = {
    isSuccess: true;
    error?: undefined;
    view: V;
} | {
    isSuccess: false;
    error: Error;
    view: undefined;
};
declare function unsafeComputeView<A extends Any>(viewsource: ParsedView<A>, likec4model: LikeC4Model<any>): ComputedView<A>;
declare function computeView<A extends Any>(viewsource: ParsedView<A>, likec4model: LikeC4Model<A>): ComputeViewResult<ComputedView<A>>;
declare function computeParsedModelData<A extends AnyParsed, B extends toComputed<A> = toComputed<A>>(parsed: ParsedLikeC4ModelData<A>): ComputedLikeC4ModelData<B>;
declare function computeLikeC4Model<A extends Any, B extends toComputed<A> = toComputed<A>>(parsed: ParsedLikeC4ModelData<A>): LikeC4Model<B>;

/**
 * Resolve rules of extended views
 * (Removes invalid views)
 */
declare function resolveRulesExtendedViews<A extends Any, V extends Record<any, ParsedView<A>>>(unresolvedViews: V): V;

/**
 * Convert hashed edge ids to human-readable
 * Mostly for testing purposes
 */
declare function withReadableEdges<V extends ComputedView<any>>({ edges, nodes, ...view }: V, separator?: string): V & {
    nodeIds: string[];
    edgeIds: string[];
};
declare function viewsWithReadableEdges<A extends Any>({ views, ...model }: ComputedLikeC4ModelData<A>): ComputedLikeC4ModelData<A>;

interface ComputedProjectNode extends ComputedNode {
    readonly projectId: ProjectId;
}
interface ComputedProjectEdge extends ComputedEdge {
    readonly projectId: ProjectId;
}
interface LayoutedProjectNode extends DiagramNode {
    readonly projectId: ProjectId;
}
interface LayoutedProjectEdge extends DiagramEdge {
    readonly projectId: ProjectId;
}
/**
 * An overview of projects and their relationships, presented as a graph with nodes and edges.
 * Even though it has same structure as other likec4 views, it is not mixed with them, as it represents a different kind.
 */
interface ComputedProjectsView extends BaseViewProperties<any> {
    readonly [_stage]: 'computed';
    readonly nodes: ReadonlyArray<ComputedProjectNode>;
    readonly edges: ReadonlyArray<ComputedProjectEdge>;
    readonly autoLayout: ViewAutoLayout;
}
interface LayoutedProjectsView extends BaseViewProperties<any> {
    readonly [_stage]: 'layouted';
    readonly nodes: ReadonlyArray<LayoutedProjectNode>;
    readonly edges: ReadonlyArray<LayoutedProjectEdge>;
    readonly bounds: BBox;
}

/**
 * Computes an overview of projects and their relationships
 */
declare function computeProjectsView(likec4models: NonEmptyArray<LikeC4Model>): ComputedProjectsView;

export { type ComputeViewResult, type ComputedProjectEdge, type ComputedProjectNode, type ComputedProjectsView, type LayoutedProjectEdge, type LayoutedProjectNode, type LayoutedProjectsView, computeLikeC4Model, computeParsedModelData, computeProjectsView, computeView, resolveRulesExtendedViews, unsafeComputeView, viewsWithReadableEdges, withReadableEdges };
