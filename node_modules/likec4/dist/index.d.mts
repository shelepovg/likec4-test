import { DiagramView } from '@likec4/core/types';
export * from '@likec4/core/types';
import { W as WorkspaceFolder, a as LikeC4Services, L as LikeC4LanguageServices, P as ProjectsManager, b as LikeC4Views, R as Range } from './shared/likec4.iedqayBZ.mjs';
import { ProjectId, NonEmptyArray } from '@likec4/core';
import { LikeC4Model } from '@likec4/core/model';
import '@likec4/core/compute-view';
import 'type-fest';
import './shared/likec4.DqDU0qex.mjs';
import '@likec4/core/styles';
import '/home/runner/work/likec4/likec4/node_modules/.pnpm/@types+picomatch@4.0.2/node_modules/@types/picomatch/index.d.ts';
import '@likec4/core/utils';

type Logger = {
    info(msg: string): void;
    warn(msg: unknown): void;
    error(err: unknown): void;
};

declare class CliWorkspace {
    private services;
    private isInitialized;
    constructor(services: CliServices);
    initWorkspace(workspace: WorkspaceFolder): Promise<void>;
}

type CliAddedServices = {
    logger: Logger;
    cli: {
        Workspace: CliWorkspace;
    };
};
type CliServices = LikeC4Services & CliAddedServices;
type CreateLanguageServiceOptions = {
    /**
     * Whether to use the file system for the language service.
     * @default true
     */
    useFileSystem?: boolean;
    /**
     * Whether to watch for changes in the workspace.
     * @default false
     */
    watch?: boolean;
    /**
     * Logger to use for the language service.
     * @default 'default'
     */
    logger?: Logger | 'vite' | 'default' | false;
    /**
     * Whether to use the `dot` binary for layouting or the WebAssembly version.
     * @default 'wasm'
     */
    graphviz?: 'wasm' | 'binary';
    /**
     * Whether to start MCP server
     * @default false
     */
    mcp?: false | 'stdio' | {
        port: number;
    };
};
declare function createLanguageServices(opts?: CreateLanguageServiceOptions): CliServices;

type LikeC4Langium = ReturnType<typeof createLanguageServices>;
type LikeC4Options = {
    /**
     * By default, if LikeC4 model is invalid, errors are printed to the console.
     * Disable this behavior by setting this option to false.
     *
     * @default true
     */
    printErrors?: boolean;
    /**
     * If true, initialization will return rejected promise with the LikeC4 instance.
     * Use `likec4.getErrors()` to get the errors.
     * @default false
     */
    throwIfInvalid?: boolean;
    /**
     * Logger to use for the language service.
     * false - no output
     * @default 'default'
     */
    logger?: Logger | 'vite' | 'default' | false;
    /**
     * Whether to use the `dot` binary for layouting or the WebAssembly version.
     * @default 'wasm'
     */
    graphviz?: 'wasm' | 'binary';
    /**
     * Whether to start MCP server
     * @default false
     */
    mcp?: false | 'stdio' | {
        port: number;
    };
    /**
     * Whether to watch for changes in the workspace.
     * @default false
     */
    watch?: boolean;
};
declare class LikeC4 {
    readonly workspace: string;
    readonly langium: LikeC4Langium;
    static fromSource(likec4SourceCode: string, opts?: LikeC4Options): Promise<LikeC4>;
    /**
     * Prevents multiple instances of LikeC4 for the same workspace
     */
    private static likec4Instances;
    /**
     * Initializes a LikeC4 instance from the specified workspace path.
     * By default in current folder
     */
    static fromWorkspace(path?: string, opts?: LikeC4Options): Promise<LikeC4>;
    private logger;
    private constructor();
    get languageServices(): LikeC4LanguageServices;
    get projectsManager(): ProjectsManager;
    get viewsService(): LikeC4Views;
    private get LangiumDocuments();
    ensureSingleProject(): void;
    /**
     * Diagram is a computed view, layouted using Graphviz
     * If diagram has manual layout, it will be used.
     * Used in React components
     */
    diagrams(projectId?: ProjectId | undefined): Promise<DiagramView[]>;
    /**
     * Builds LikeC4Model from all documents
     * Only computes view predicates {@link ComputedView} - i.e. no layout
     * Not ready for rendering, but enough to traverse
     *
     * Sync version does not read manual layouts
     * Use {@link computedModel} for a version that includes manual layouts
     */
    syncComputedModel(project?: ProjectId | undefined): LikeC4Model.Computed;
    /**
     * Builds LikeC4Model from all documents
     * Only computes view predicates {@link ComputedView} - i.e. no layout
     * Not ready for rendering, but enough to traverse
     */
    computedModel(project?: ProjectId | undefined): Promise<LikeC4Model.Computed>;
    projects(): NonEmptyArray<ProjectId>;
    /**
     * Same as {@link computedModel()}, but also applies layout
     * Ready for rendering
     */
    layoutedModel(project?: ProjectId | undefined): Promise<LikeC4Model.Layouted>;
    getErrors(): {
        message: string;
        line: number;
        range: Range;
        sourceFsPath: string;
    }[];
    hasErrors(): boolean;
    /**
     * @returns true if there are errors
     */
    printErrors(): boolean;
    /**
     * @returns a function to dispose the listener
     */
    onModelUpdate(listener: () => void): () => void;
    dispose(): Promise<void>;
    [Symbol.asyncDispose](): Promise<void>;
}

export { LikeC4, type LikeC4Options };
